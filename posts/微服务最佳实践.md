
Amigoscode Newsletter
=====================

# Amigoscode Newsletter

# é˜¿å¯†æˆˆæ–¯ä»£ç æ—¶äº‹é€šè®¯
  
https://blog.amigoscode.com/p/mircroservices-best-practices?r=22x1kh&ref=dailydev&triedRedirect=true  
#### Mircroservices Best Practices  
#### å¾®æœåŠ¡æœ€ä½³å®è·µ  
# Mircroservices Best Practices  
# å¾®æœåŠ¡æœ€ä½³å®è·µ  
### Mastering Microservices: Key Practices for Success  
### æŒæ¡å¾®æœåŠ¡ï¼šæˆåŠŸçš„å…³é”®å®è·µ  
#### Mircroservices Best Practices  
#### å¾®æœåŠ¡æœ€ä½³å®è·µ

Microservices architecture has become the go-to solution for building scalable, flexible, and resilient applications. Unlike monolithic applications, microservices break down functionalities into small, independent services, each responsible for a specific feature or function.

å¾®æœåŠ¡æ¶æ„å·²æˆä¸ºæ„å»ºå¯æ‰©å±•ã€çµæ´»å’Œæœ‰å¼¹æ€§çš„åº”ç”¨ç¨‹åºçš„é¦–é€‰è§£å†³æ–¹æ¡ˆã€‚ä¸å•ä½“åº”ç”¨ç¨‹åºä¸åŒï¼Œå¾®æœåŠ¡å°†åŠŸèƒ½åˆ†è§£æˆå°çš„ã€ç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„ç‰¹æ€§æˆ–åŠŸèƒ½ã€‚

This architecture empowers teams to work in parallel, increases the agility of development, and enhances fault tolerance.

è¿™ç§æ¶æ„ä½¿å›¢é˜Ÿèƒ½å¤Ÿå¹¶è¡Œå·¥ä½œï¼Œæé«˜å¼€å‘çš„æ•æ·æ€§ï¼Œå¹¶å¢å¼ºå®¹é”™èƒ½åŠ›ã€‚



  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcf6e8032-a8eb-448d-ae09-c5612463e977_2400x3162.png)





Before we start I just want to let you know that we Amigoscode have officially launched Portfolly. The one-click portfolio builder for developers.

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæˆ‘åªæ˜¯æƒ³è®©ä½ çŸ¥é“ï¼Œæˆ‘ä»¬ Amigoscode å·²ç»æ­£å¼æ¨å‡ºäº† Portfollyã€‚è¿™æ˜¯é¢å‘å¼€å‘äººå‘˜çš„ä¸€é”®å¼æŠ•èµ„ç»„åˆæ„å»ºå™¨ã€‚  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc4ffb5d0-e8d0-4b07-a3ef-71ee06c6c681_800x571.gif)





Get yours now ğŸš€

ç°åœ¨å°±å»è·å–ä½ çš„ï¼ˆå®ƒï¼‰ğŸš€









Before we start quick question ğŸ‘€

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå¿«é€Ÿé—®ä¸ªé—®é¢˜ ğŸ‘€

I personally start with Monolithic first. Iâ€™ll explain why in a separate blog.

æˆ‘ä¸ªäººé¦–å…ˆä»æ•´ä½“å¼å¼€å§‹ã€‚æˆ‘ä¼šåœ¨å¦ä¸€ç¯‡åšå®¢ä¸­è§£é‡ŠåŸå› ã€‚





Thanks for reading Amigoscode Newsletter! Subscribe for free to receive new posts and support my work.

æ„Ÿè°¢é˜…è¯» Amigoscode æ—¶äº‹é€šè®¯ï¼å…è´¹è®¢é˜…ä»¥æ¥æ”¶æ–°æ–‡ç« å¹¶æ”¯æŒæˆ‘çš„å·¥ä½œã€‚









Alright, lets start.

å¥½çš„ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚

1. Docker

â€œDockerâ€å¸¸è§çš„ä¸­æ–‡ç¿»è¯‘ä¸ºâ€œå¤šå…‹å°”â€æˆ–â€œç å¤´å·¥äººâ€ã€‚  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4bb79f33-576b-4d76-96fa-830de1dbd1e8_381x334.png)





Docker is a key tool for microservices. It packages each service into containers, ensuring consistency across multiple environments (development, testing, production). By using Docker, developers can package a microservice, along with all its dependencies, into a single container image that can run anywhere. The Docker Daemon manages these containers and uses a registry to store and retrieve container images.

Docker æ˜¯å¾®æœåŠ¡çš„ä¸€ä¸ªå…³é”®å·¥å…·ã€‚å®ƒå°†æ¯ä¸ªæœåŠ¡æ‰“åŒ…åˆ°å®¹å™¨ä¸­ï¼Œç¡®ä¿åœ¨å¤šä¸ªç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸­ä¿æŒä¸€è‡´æ€§ã€‚é€šè¿‡ä½¿ç”¨ Dockerï¼Œå¼€å‘äººå‘˜å¯ä»¥å°†ä¸€ä¸ªå¾®æœåŠ¡åŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œçš„å•ä¸ªå®¹å™¨é•œåƒä¸­ã€‚Docker å®ˆæŠ¤è¿›ç¨‹ç®¡ç†è¿™äº›å®¹å™¨ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒæ¥å­˜å‚¨å’Œæ£€ç´¢å®¹å™¨é•œåƒã€‚



  
### 2. Container Orchestration (Kubernetes)  
### 2. å®¹å™¨ç¼–æ’ï¼ˆåº“ä¼¯å†…ç‰¹ï¼‰  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F05680881-946b-4e3f-b048-4c57cb2e149b_381x333.png)

As the number of microservices grows, managing them manually becomes complex. Container orchestration platforms, such as Kubernetes, automate the deployment, scaling, and management of containerized applications. Kubernetes manages multiple containerized services by running them across nodes in a cluster.

éšç€å¾®æœåŠ¡æ•°é‡çš„å¢é•¿ï¼Œæ‰‹åŠ¨ç®¡ç†å®ƒä»¬å˜å¾—å¤æ‚ã€‚å®¹å™¨ç¼–æ’å¹³å°ï¼Œå¦‚ Kubernetesï¼Œè‡ªåŠ¨åŒ–å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚Kubernetes é€šè¿‡åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¸Šè¿è¡Œå¤šä¸ªå®¹å™¨åŒ–æœåŠ¡æ¥ç®¡ç†å®ƒä»¬ã€‚



  
### 3. Caching  
### 3. ç¼“å­˜  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc4f0a171-d256-4ad0-9d07-ef28c1f78f27_381x334.png)

Microservices can benefit significantly from caching strategies to improve performance and reduce latency. In this architecture, caching systems like Redis or Memcached can be used to store frequently accessed data, reducing the load on the database.

å¾®æœåŠ¡å¯ä»¥ä»ç¼“å­˜ç­–ç•¥ä¸­æ˜¾è‘—å—ç›Šï¼Œä»¥æé«˜æ€§èƒ½å¹¶é™ä½å»¶è¿Ÿã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œåƒ Redis æˆ– Memcached è¿™æ ·çš„ç¼“å­˜ç³»ç»Ÿå¯ç”¨äºå­˜å‚¨é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œä»è€Œå‡è½»æ•°æ®åº“çš„è´Ÿè½½ã€‚







  
### 4. Single Database per Service  
### 4. æ¯ä¸ªæœåŠ¡ä¸€ä¸ªå•ä¸€æ•°æ®åº“  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60ce48e0-20b7-4bee-821a-e8ebc58ff576_381x333.png)

To ensure that each microservice remains independent, it's a good practice to give each one its own database. While microservices can communicate with each other, their databases should not be shared to maintain service autonomy. Each service should manage its data, ensuring that any issues in one database wonâ€™t affect others.

ä¸ºç¡®ä¿æ¯ä¸ªå¾®æœåŠ¡ä¿æŒç‹¬ç«‹ï¼Œç»™æ¯ä¸ªå¾®æœåŠ¡ä¸€ä¸ªå®ƒè‡ªå·±çš„æ•°æ®åº“æ˜¯ä¸€ä¸ªå¥½çš„å®è·µåšæ³•ã€‚è™½ç„¶å¾®æœåŠ¡å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œä½†æ˜¯å®ƒä»¬çš„æ•°æ®åº“ä¸åº”è¯¥è¢«å…±äº«ä»¥ä¿æŒæœåŠ¡çš„è‡ªä¸»æ€§ã€‚æ¯ä¸ªæœåŠ¡åº”è¯¥ç®¡ç†å®ƒè‡ªå·±çš„æ•°æ®ï¼Œç¡®ä¿ä¸€ä¸ªæ•°æ®åº“ä¸­çš„ä»»ä½•é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–çš„ã€‚



  
### 5. Distributed Tracing  
### 5. åˆ†å¸ƒå¼è¿½è¸ª  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F45e8ef49-b4ae-409d-8354-420aa45a3364_380x333.png)

In a microservices architecture, requests often traverse multiple services, making it difficult to track and debug issues. Distributed tracing helps track requests as they move through various services. By tagging requests with trace IDs, you can monitor and analyze how long each service takes to process requests.

åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œè¯·æ±‚é€šå¸¸ä¼šéå†å¤šä¸ªæœåŠ¡ï¼Œè¿™ä½¿å¾—è·Ÿè¸ªå’Œè°ƒè¯•é—®é¢˜å˜å¾—å›°éš¾ã€‚åˆ†å¸ƒå¼è·Ÿè¸ªæœ‰åŠ©äºåœ¨è¯·æ±‚æµç»å„ç§æœåŠ¡æ—¶å¯¹å…¶è¿›è¡Œè·Ÿè¸ªã€‚é€šè¿‡ç”¨è·Ÿè¸ªæ ‡è¯†å¯¹è¯·æ±‚è¿›è¡Œæ ‡è®°ï¼Œä½ å¯ä»¥ç›‘æ§å’Œåˆ†ææ¯ä¸ªæœåŠ¡å¤„ç†è¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚  
### 6. Monitoring and Tracing  
### 6. ç›‘æµ‹ä¸è¿½è¸ª  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F460b8376-72c4-4a0a-a28b-4c920dee1f34_381x333.png)

In addition to tracing requests, itâ€™s vital to monitor both the health and performance of microservices. Monitoring tools like Prometheus and Grafana provide insights into resource consumption, error rates, and service health, while tracing tools help you understand inter-service dependencies.

é™¤äº†è·Ÿè¸ªè¯·æ±‚ä¹‹å¤–ï¼Œç›‘æ§å¾®æœåŠ¡çš„å¥åº·çŠ¶å†µå’Œæ€§èƒ½ä¹Ÿè‡³å…³é‡è¦ã€‚åƒæ™®ç½—ç±³ä¿®æ–¯å’Œæ ¼æ‹‰æ³•çº³è¿™æ ·çš„ç›‘æ§å·¥å…·æä¾›äº†å¯¹èµ„æºæ¶ˆè€—ã€é”™è¯¯ç‡å’ŒæœåŠ¡å¥åº·çš„æ´å¯Ÿï¼Œè€Œè·Ÿè¸ªå·¥å…·åˆ™å¸®åŠ©ä½ ç†è§£æœåŠ¡é—´çš„ä¾èµ–å…³ç³»ã€‚  
### 7. Logging  
### 7. ä¼æœ¨ï¼›é‡‡ä¼  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8eea59b9-acc8-4cb4-9b1d-bf727955d354_381x334.png)

Effective logging is crucial for diagnosing issues, especially in a distributed architecture. Centralized logging platforms like ELK Stack (Elasticsearch, Logstash, and Kibana) or Graylog aggregate logs from various microservices, making it easier to trace issues across different services.

æœ‰æ•ˆçš„æ—¥å¿—è®°å½•å¯¹äºè¯Šæ–­é—®é¢˜è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­ã€‚åƒ ELK å †æ ˆï¼ˆElasticsearchã€Logstash å’Œ Kibanaï¼‰æˆ– Graylog è¿™æ ·çš„é›†ä¸­å¼æ—¥å¿—è®°å½•å¹³å°ä¼šä»å„ç§å¾®æœåŠ¡ä¸­æ±‡æ€»æ—¥å¿—ï¼Œä½¿è·¨ä¸åŒæœåŠ¡è¿½è¸ªé—®é¢˜å˜å¾—æ›´åŠ å®¹æ˜“ã€‚  
### 8. Event Bus  
### 8. äº‹ä»¶æ€»çº¿  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F25724a6f-1b2a-4728-b9e1-b1abd7151af3_380x334.png)

Microservices often need to communicate asynchronously. An Event Bus facilitates this by allowing services to emit and consume events without being tightly coupled. Tools like Kafka or RabbitMQ enable event-driven communication between services.

å¾®æœåŠ¡é€šå¸¸éœ€è¦å¼‚æ­¥é€šä¿¡ã€‚äº‹ä»¶æ€»çº¿é€šè¿‡å…è®¸æœåŠ¡å‘é€å’Œæ¶ˆè´¹äº‹ä»¶è€Œæ— éœ€ç´§å¯†è€¦åˆæ¥ä¿ƒè¿›è¿™ä¸€ç‚¹ã€‚åƒ Kafka æˆ– RabbitMQ è¿™æ ·çš„å·¥å…·å®ç°äº†æœåŠ¡ä¹‹é—´çš„äº‹ä»¶é©±åŠ¨é€šä¿¡ã€‚  
### 9. Service Discovery  
### 9. æœåŠ¡å‘ç°  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d2c401e-1d78-4594-945e-c121c6e977fe_381x334.png)

As microservices are dynamically deployed across multiple nodes and instances, Service Discovery becomes essential. Tools like Consul or Eureka register services with a central registry, allowing other services to discover and communicate with them.

ç”±äºå¾®æœåŠ¡æ˜¯åœ¨å¤šä¸ªèŠ‚ç‚¹å’Œå®ä¾‹ä¸ŠåŠ¨æ€éƒ¨ç½²çš„ï¼ŒæœåŠ¡å‘ç°å°±å˜å¾—è‡³å…³é‡è¦ã€‚åƒ Consul æˆ– Eureka è¿™æ ·çš„å·¥å…·ä¼šå°†æœåŠ¡åœ¨ä¸­å¤®æ³¨å†Œä¸­å¿ƒè¿›è¡Œæ³¨å†Œï¼Œå…è®¸å…¶ä»–æœåŠ¡å‘ç°å¹¶ä¸å®ƒä»¬è¿›è¡Œé€šä¿¡ã€‚  
### 10. Load Balancing  
### 10. è´Ÿè½½å‡è¡¡  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F49fc1797-a025-4937-8136-bc207e786537_381x334.png)

Load balancing distributes incoming traffic evenly across multiple service instances to avoid overloading a single instance. Tools like HAProxy or Nginx can act as load balancers in your microservices setup, ensuring high availability and better performance.

è´Ÿè½½å‡è¡¡å°†ä¼ å…¥æµé‡å‡åŒ€åœ°åˆ†å¸ƒåœ¨å¤šä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œä»¥é¿å…å•ä¸ªå®ä¾‹è¿‡è½½ã€‚åƒ HAProxy æˆ– Nginx è¿™æ ·çš„å·¥å…·åœ¨ä½ çš„å¾®æœåŠ¡è®¾ç½®ä¸­å¯ä»¥å……å½“è´Ÿè½½å‡è¡¡å™¨ï¼Œç¡®ä¿é«˜å¯ç”¨æ€§å’Œæ›´å¥½çš„æ€§èƒ½ã€‚  
### 11. API Gateway  
### 11. åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ç½‘å…³  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F09db6476-2042-41e2-8d6a-ac92a9f1ae6d_380x334.png)

An API Gateway acts as a single entry point for all microservices, handling request routing, authentication, rate limiting, and more. Tools like Kong or NGINX serve as API gateways to manage external requests to various services.

ä¸€ä¸ª API ç½‘å…³å……å½“æ‰€æœ‰å¾®æœåŠ¡çš„å•ä¸€å…¥å£ç‚¹ï¼Œå¤„ç†è¯·æ±‚è·¯ç”±ã€è®¤è¯ã€é€Ÿç‡é™åˆ¶ç­‰ç­‰ã€‚åƒ Kong æˆ– NGINX è¿™æ ·çš„å·¥å…·å……å½“ API ç½‘å…³æ¥ç®¡ç†å¯¹å„ç§æœåŠ¡çš„å¤–éƒ¨è¯·æ±‚ã€‚



  
### 12. Cloud Provider  
### 12. äº‘æœåŠ¡æä¾›å•†  
![](https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44201de7-410c-4bf9-a77f-374ce7630a26_381x333.png)

Deploying microservices in the cloud offers scalability, resilience, and flexibility. Cloud providers like AWS, Google Cloud, or Azure provide managed services that make it easier to deploy, scale, and monitor your applications in real-time.

åœ¨äº‘ä¸­éƒ¨ç½²å¾®æœåŠ¡æä¾›äº†å¯æ‰©å±•æ€§ã€å¼¹æ€§å’Œçµæ´»æ€§ã€‚åƒ AWSã€è°·æ­Œäº‘æˆ– Azure è¿™æ ·çš„äº‘æœåŠ¡æä¾›å•†æä¾›æ‰˜ç®¡æœåŠ¡ï¼Œä½¿å®æ—¶éƒ¨ç½²ã€æ‰©å±•å’Œç›‘æ§ä½ çš„åº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å®¹æ˜“ã€‚









Keep in mind that a successful microservices architecture depends on how well you implement these principles, making it crucial to plan, design, and maintain your services properly from the start.

è¯·è®°ä½ï¼Œä¸€ä¸ªæˆåŠŸçš„å¾®æœåŠ¡æ¶æ„å–å†³äºä½ å¯¹è¿™äº›åŸåˆ™çš„æ‰§è¡Œç¨‹åº¦ï¼Œå› æ­¤ä»ä¸€å¼€å§‹å°±æ­£ç¡®åœ°è§„åˆ’ã€è®¾è®¡å’Œç»´æŠ¤ä½ çš„æœåŠ¡æ˜¯è‡³å…³é‡è¦çš„ã€‚





See you soon.

å›å¤´è§ã€‚ / å¾…ä¼šå„¿è§ã€‚  / ä¸ä¹…åè§ã€‚

Thanks for reading Amigoscode Newsletter! Subscribe for free to receive new posts and support my work.

æ„Ÿè°¢é˜…è¯» Amigoscode æ—¶äº‹é€šè®¯ï¼å…è´¹è®¢é˜…ä»¥æ¥æ”¶æ–°çš„å¸–å­å¹¶æ”¯æŒæˆ‘çš„å·¥ä½œã€‚



  
#### Mircroservices Best Practices  
#### å¾®æœåŠ¡æœ€ä½³å®è·µ